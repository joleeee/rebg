<script>
    import Step from "./Step.svelte";

    export let steps = [
        [0, 0, "0x0000005500806280", "sub sp, sp, x0"],
        [0, 1, "0x0000005500806284", "str xzr, [sp]"],
        [0, 2, "0x0000005500806288", "cmp x0, #0x400"],
        [0, 3, "0x000000550080628c", "b.hs #0x55008064c8"],
        [0, 4, "0x0000005500806290", "ldr x0, [x19]"],
        [0, 5, "0x0000005500806294", "add x26, sp, #0x10"],
        [0, 6, "0x0000005500806298", "mov w22, #0"],
        [0, 7, "0x000000550080629c", "cbnz x0, #0x55008062ac"],
        [0, 8, "0x00000055008062ac", "ldr x1, [x0, #0x28]"],
        [0, 9, "0x00000055008062b0", "cmp x1, x0"],
        [1, 10, "0x00000055008062b4", "b.ne #0x55008062a4"],
        [1, 11, "0x00000055008062b8", "cmp w23, w22"],
        [1, 12, "0x00000055008062bc", "b.ls #0x55008064f0"],
        [1, 13, "0x00000055008062c0", "ldr w1, [x0, #0x348]"],
        [2, 14, "0x00000055008062c4", "str x0, [x26, w22, uxtw #3]"],
        [2, 15, "0x00000055008062c8", "add w1, w1, #1"],
        [2, 16, "0x00000055008062cc", "str w1, [x0, #0x348]"],
        [1, 17, "0x00000055008062d0", "str w22, [x0, #0x41c]"],
        [1, 18, "0x00000055008062d4", "add w22, w22, #1"],
        [1, 19, "0x00000055008062d8", "ldr x0, [x0, #0x18]"],
        [1, 20, "0x00000055008062dc", "cbnz x0, #0x55008062ac"],
        [0, 21, "0x00000055008062e0", "cmp w23, w22"],
        [0, 22, "0x00000055008062e4", "cset w0, eq"],
        [0, 23, "0x00000055008062e8", "cmp x20, #0"],
        [0, 24, "0x00000055008062ec", "ccmp w0, #0, #0, eq"],
        [0, 25, "0x00000055008062f0", "b.eq #0x5500806530"],
        [0, 26, "0x00000055008062f4", "cmp x20, #0"],
        [0, 27, "0x00000055008062f8", "cset w2, eq"],
        [0, 28, "0x00000055008062fc", "cmp w0, #0"],
        [0, 29, "0x0000005500806300", "ccmp w2, #0, #0, eq"],
        [0, 30, "0x0000005500806304", "b.ne #0x5500806314"],
        [0, 31, "0x0000005500806314", "mov w1, w22"],
        [0, 32, "0x0000005500806318", "mov x0, x26"],
        [0, 33, "0x000000550080631c", "mov w3, #1"],
        [0, 34, "0x0000005500806320", "bl #0x5500811900"],
        [0, 35, "0x0000005500811854", "ldr x0, [x20, #0x400]"],
        [0, 36, "0x0000005500811858", "cbz x0, #0x5500811818"],
        [0, 37, "0x0000005500806324", "adrp x1, #0x550083c000"],
        [0, 38, "0x0000005500806328", "add x0, x21, #0xac8"],
        [0, 39, "0x000000550080632c", "mov x23, #0"],
        [0, 40, "0x0000005500806330", "ldr x1, [x1, #0xb28]"],
        [0, 41, "0x0000005500806334", "blr x1"],
        [0, 42, "0x0000005500806338", "cbz w22, #0x55008063dc"],
        [0, 43, "0x000000550080633c", "nop "],
        [0, 44, "0x0000005500806340", "ldr x28, [x26, x23, lsl #3]"],
        [0, 45, "0x0000005500806344", "ldrh w0, [x28, #0x34c]"],
        [0, 46, "0x0000005500806348", "tbz w0, #3, #0x55008063c4"],
        [0, 47, "0x000000550080634c", "ldr x1, [x28, #0x110]"],
        [0, 48, "0x0000005500806350", "and w0, w0, #0xfffffff7"],
        [0, 49, "0x0000005500806354", "strh w0, [x28, #0x34c]"],
        [0, 50, "0x0000005500806358", "cbz x1, #0x5500806434"],
        [0, 51, "0x000000550080635c", "adrp x0, #0x550083c000"],
        [0, 52, "0x0000005500806360", "ldr w0, [x0, #0xb60]"],
        [0, 53, "0x0000005500806364", "tbnz w0, #1, #0x5500806448"],
        [0, 54, "0x0000005500806368", "ldr x0, [x28, #0x120]"],
        [0, 55, "0x000000550080636c", "ldr x25, [x28]"],
        [0, 56, "0x0000005500806370", "ldr x0, [x0, #8]"],
        [0, 57, "0x0000005500806374", "ldr x2, [x1, #8]"],
        [0, 58, "0x0000005500806378", "lsr x1, x0, #3"],
        [0, 59, "0x000000550080637c", "sub w0, w1, #1"],
        [0, 60, "0x0000005500806380", "add x25, x25, x2"],
        [0, 61, "0x0000005500806384", "add x27, x25, w0, uxtw #3"],
        [0, 62, "0x0000005500806388", "cbz w1, #0x55008063a4"],
        [0, 63, "0x000000550080638c", "nop "],
        [0, 64, "0x0000005500806390", "ldr x1, [x27]"],
        [0, 65, "0x0000005500806394", "blr x1"],
        [1, 66, "0x00000000004005bc", "mov x29, sp"],
        [1, 67, "0x00000000004005c0", "str x19, [sp, #0x10]"],
        [1, 68, "0x00000000004005c4", "adrp x19, #0x411000"],
        [1, 69, "0x00000000004005c8", "ldrb w0, [x19, #0x38]"],
        [1, 70, "0x00000000004005cc", "cbnz w0, #0x4005dc"],
        [1, 71, "0x00000000004005d0", "bl #<call_weak_fn+20>"],
        [1, 72, "0x0000000000400550", "add x1, x0, #0x38"],
        [1, 73, "0x0000000000400554", "adrp x0, #0x411000"],
        [1, 74, "0x0000000000400558", "add x0, x0, #0x38"],
        [1, 75, "0x000000000040055c", "cmp x1, x0"],
        [1, 76, "0x0000000000400560", "b.eq #0x400578"],
        [1, 77, "0x0000000000400578", "ret "],
        [1, 78, "0x00000000004005d4", "mov w0, #1"],
        [1, 79, "0x00000000004005d8", "strb w0, [x19, #0x38]"],
        [1, 80, "0x00000000004005dc", "ldr x19, [sp, #0x10]"],
        [1, 81, "0x00000000004005e0", "ldp x29, x30, [sp], #0x20"],
        [1, 82, "0x00000000004005e4", "ret "],
        [0, 83, "0x0000005500806398", "cmp x25, x27"],
        [0, 84, "0x000000550080639c", "sub x27, x27, #8"],
        [0, 85, "0x00000055008063a0", "b.ne #0x5500806390"],
        [0, 86, "0x00000055008063a4", "ldr x0, [x28, #0xa8]"],
        [0, 87, "0x00000055008063a8", "cbz x0, #0x55008063bc"],
        [0, 88, "0x00000055008063ac", "ldr x1, [x28]"],
        [0, 89, "0x00000055008063b0", "ldr x0, [x0, #8]"],
        [0, 90, "0x00000055008063b4", "add x0, x1, x0"],
        [0, 91, "0x00000055008063b8", "blr x0"],
        [1, 92, "0x00000000004007c8", "mov x29, sp"],
        [1, 93, "0x00000000004007cc", "ldp x29, x30, [sp], #0x10"],
        [1, 94, "0x00000000004007d0", "ret "],
        [0, 95, "0x00000055008063bc", "mov x0, x28"],
        [0, 96, "0x00000055008063c0", "bl #0x5500815670"],
        [0, 97, "0x0000005500815670", "stp x29, x30, [sp, #-0x50]!"],
        [0, 98, "0x0000005500815674", "mov x29, sp"],
        [0, 99, "0x0000005500815678", "stp x19, x20, [sp, #0x10]"],
        [0, 100, "0x000000550081567c", "adrp x20, #0x550083c000"],
        [0, 101, "0x0000005500815680", "add x20, x20, #0xb60"],
        [0, 102, "0x0000005500815684", "mov x19, x0"],
        [0, 103, "0x0000005500815688", "ldr w0, [x20, #0x2b8]"],
        [0, 104, "0x000000550081568c", "cbnz w0, #0x550081569c"],
        [0, 105, "0x0000005500815690", "ldp x19, x20, [sp, #0x10]"],
        [0, 106, "0x0000005500815694", "ldp x29, x30, [sp], #0x50"],
        [0, 107, "0x0000005500815698", "ret "],
        [0, 108, "0x00000055008063c4", "ldr w0, [x28, #0x348]"],
        [0, 109, "0x00000055008063c8", "add x23, x23, #1"],
        [0, 110, "0x00000055008063cc", "sub w0, w0, #1"],
        [0, 111, "0x00000055008063d0", "str w0, [x28, #0x348]"],
        [0, 112, "0x00000055008063d4", "cmp w22, w23"],
        [0, 113, "0x00000055008063d8", "b.hi #0x5500806340"],
        [0, 114, "0x0000005500806434", "ldr x0, [x28, #0xa8]"],
        [0, 115, "0x0000005500806438", "cbz x0, #0x55008063bc"],
        [0, 116, "0x00000055008063dc", "mov x0, x20"],
        [0, 117, "0x00000055008063e0", "mov w1, #0"],
        [0, 118, "0x00000055008063e4", "bl #0x5500815470"],
        [0, 119, "0x00000055008063e8", "sub x20, x20, #1"],
        [0, 120, "0x00000055008063ec", "ldr x0, [x29, #0x80]"],
        [0, 121, "0x00000055008063f0", "sub x19, x19, #0xa8"],
        [0, 122, "0x00000055008063f4", "mov sp, x0"],
        [0, 123, "0x00000055008063f8", "cmn x20, #1"],
        [0, 124, "0x00000055008063fc", "b.ne #0x5500806210"],
        [0, 125, "0x0000005500806400", "ldr w0, [x29, #0x8c]"],
        [0, 126, "0x0000005500806404", "cbz w0, #0x550080646c"],
        [0, 127, "0x000000550080646c", "adrp x0, #0x550083c000"],
        [0, 128, "0x0000005500806470", "add x1, x0, #0xb60"],
        [0, 129, "0x0000005500806474", "ldr w1, [x1, #0x2b8]"],
        [0, 130, "0x0000005500806478", "cbz w1, #0x550080640c"],
        [0, 131, "0x000000550080640c", "ldr w0, [x0, #0xb60]"],
        [0, 132, "0x0000005500806410", "tbnz w0, #7, #0x55008064d0"],
        [0, 133, "0x0000005500806414", "mov sp, x29"],
        [0, 134, "0x0000005500806418", "ldp x19, x20, [sp, #0x10]"],
    ];
</script>

<div class="outer">
    {#each steps as step}
        <Step
            depth={parseInt(step[0].toString())}
            idx={step[1]}
            adr={step[2]}
            asm={step[3]}
        />
    {/each}
</div>

<style>
    .outer {
        padding: 0;
        margin: 0;
    }
</style>
